import { NextRequest, NextResponse } from 'next/server';import { stripe } from '@/lib/stripe';export async function POST(req:NextRequest){const sig=req.headers.get('stripe-signature')!;const buf=Buffer.from(await req.arrayBuffer());let event;try{event=stripe.webhooks.constructEvent(buf,sig,process.env.STRIPE_WEBHOOK_SECRET!);}catch(err:any){return new NextResponse(`Webhook Error: ${err.message}`,{status:400});}console.log('Stripe event:',event.type);return NextResponse.json({received:true});}